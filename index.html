<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Мы вместе</title>
  <style>
    :root {
      --day-bg: linear-gradient(to top, #ffdde1, #ffc3a0);
      --night-bg: linear-gradient(to bottom, #0f2027, #203a43, #2c5364);
      --text-primary: rgba(255, 255, 255, 0.95);
    }

    body {
      margin: 0;
      padding: 20px;
      height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-family: -apple-system, 'Segoe UI', sans-serif;
      color: var(--text-primary);
      text-align: center;
      overflow: hidden;
      position: relative;
      box-sizing: border-box;
    }

    body::before {
      content: '';
      position: absolute;
      width: 100%;
      height: 100%;
      transition: opacity 1.5s ease;
      z-index: -1;
      top: 0;
      left: 0;
    }

    .day-mode::before {
      background: var(--day-bg);
      opacity: 1;
    }

    .night-mode::before {
      background: var(--night-bg);
      opacity: 1;
    }

    h1, p, h2 {
      z-index: 2;
      text-shadow: 0 2px 8px rgba(0,0,0,0.3);
      margin: 0.5em 0;
      line-height: 1.4;
    }

    h1 {
      font-size: 2.2rem;
      font-weight: 600;
      max-width: 90%;
    }

    p, h2 {
      font-size: 1.1rem;
      max-width: 90%;
      font-weight: 400;
      letter-spacing: 0.3px;
    }

    .sun, .moon {
      position: absolute;
      width: 80px;
      height: 80px;
      border-radius: 50%;
      top: 40px;
      left: 40px;
      opacity: 0.9;
      z-index: 0;
    }

    .sun {
      background: radial-gradient(circle, #ffd700, #ffa500);
      box-shadow: 0 0 20px #ffa500;
    }

    .moon {
      background: radial-gradient(circle, #ccc, #888);
      box-shadow: 0 0 20px #aaa;
      display: none;
    }

    .clouds {
      width: 100%;
      height: 120px;
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="300" height="120" viewBox="0 0 300 120"><g fill="%23ffffff" opacity="0.6"><ellipse cx="50" cy="60" rx="40" ry="25"/><ellipse cx="100" cy="50" rx="50" ry="30"/><ellipse cx="160" cy="60" rx="45" ry="28"/><ellipse cx="220" cy="55" rx="40" ry="25"/><ellipse cx="270" cy="60" rx="35" ry="22"/></g></svg>');
      background-repeat: repeat-x;
      background-position: center;
      background-size: contain;
      animation: moveClouds 60s linear infinite;
      position: absolute;
      top: 0;
      left: 0;
      z-index: 1;
    }

    @keyframes moveClouds {
      0% { background-position: 0 0; }
      100% { background-position: 1000px 0; }
    }

    .heart {
      position: fixed;
      animation: floatUp 4s ease-in forwards;
      z-index: 9999;
    }

    @keyframes floatUp {
      0% { transform: translateY(0) scale(1); opacity: 1; }
      100% { transform: translateY(-200px) scale(1.2) rotate(30deg); opacity: 0; }
    }

    .mode-toggle {
      position: absolute;
      top: 15px;
      right: 15px;
      background: rgba(255,255,255,0.3);
      border: none;
      padding: 12px 18px;
      border-radius: 15px;
      cursor: pointer;
      font-weight: 600;
      color: #333;
      z-index: 3;
      backdrop-filter: blur(6px);
      transition: all 0.2s ease;
      font-size: 0.95rem;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    @media (max-width: 600px) {
      body {
        padding: 15px;
        justify-content: flex-start;
        padding-top: 70px;
      }

      h1 {
        font-size: 1.8rem;
        margin: 0.5em 0;
      }

      p, h2 {
        font-size: 1rem;
      }

      .mode-toggle {
        padding: 10px 15px;
        font-size: 0.85rem;
        top: 10px;
        right: 10px;
      }

      .sun, .moon {
        width: 60px;
        height: 60px;
        top: 20px;
        left: 20px;
      }
    }
  </style>
</head>
<body class="day-mode">
  <h1>Ты моё счастье</h1>
  <p>С тобой каждый день — как сказка ✨</p>
  <h2 id="daysTogether">Мы вместе: ...</h2>
  <h2 id="toAnniversary">До годовщины: ...</h2>
  <button class="mode-toggle" onclick="toggleMode()">Сменить режим</button>
  <div class="sun"></div>
  <div class="moon"></div>
  <div class="clouds"></div>

  <script>
    function toggleMode() {
      const body = document.body;
      const sun = document.querySelector('.sun');
      const moon = document.querySelector('.moon');
      if (body.classList.contains('day-mode')) {
        body.classList.replace('day-mode', 'night-mode');
        sun.style.display = 'none';
        moon.style.display = 'block';
      } else {
        body.classList.replace('night-mode', 'day-mode');
        sun.style.display = 'block';
        moon.style.display = 'none';
      }
    }

    function createHeart(x, y) {
      const heart = document.createElementNS("http://www.w3.org/2000/svg", "svg");
      heart.setAttribute("viewBox", "0 0 32 29.6");
      heart.setAttribute("width", "30");
      heart.setAttribute("height", "30");
      heart.classList.add("heart");
      heart.style.left = `${x}px`;
      heart.style.top = `${y}px`;
      heart.style.position = "fixed";
      heart.style.pointerEvents = "none";

      const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
      path.setAttribute("d", "M23.6,0c-3.4,0-6.4,2.1-7.6,5.2C14.8,2.1,11.8,0,8.4,0C3.8,0,0,3.8,0,8.4c0,9.1,16,21.2,16,21.2S32,17.5,32,8.4 C32,3.8,28.2,0,23.6,0z");
      path.setAttribute("fill", "#ff4d6d");
      path.setAttribute("filter", "drop-shadow(0 0 6px #ff4d6d)");
      heart.appendChild(path);
      document.body.appendChild(heart);
      setTimeout(() => heart.remove(), 4000);
    }

    setInterval(() => {
      const x = Math.random() * window.innerWidth;
      const y = window.innerHeight - 30;
      createHeart(x, y);
    }, 1000);

    document.body.addEventListener("click", (e) => {
      createHeart(e.clientX - 15, e.clientY - 15);
    });

    // Счётчики
    const startDate = new Date(2024, 10, 4); // 4 ноября 2024
    const now = new Date();
    const diffTime = now - startDate;
    const daysTogether = Math.floor(diffTime / (1000 * 60 * 60 * 24));
    document.getElementById("daysTogether").textContent = `Мы вместе: ${daysTogether} ${declineDay(daysTogether)}`;

    // До следующей годовщины
    const nextAnniversary = new Date(startDate);
    nextAnniversary.setFullYear(now.getFullYear());
    if (nextAnniversary < now) {
      nextAnniversary.setFullYear(now.getFullYear() + 1);
    }
    const daysToAnniversary = Math.ceil((nextAnniversary - now) / (1000 * 60 * 60 * 24));
    document.getElementById("toAnniversary").textContent = `До годовщины: ${daysToAnniversary} ${declineDay(daysToAnniversary)}`;

    function declineDay(n) {
      if (n % 10 === 1 && n % 100 !== 11) return 'день';
      if ([2,3,4].includes(n % 10) && ![12,13,14].includes(n % 100)) return 'дня';
      return 'дней';
    }
  </script>
</body>
</html>
